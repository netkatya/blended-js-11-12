{"version":3,"file":"helpers-DsBFHUdu.js","sources":["../../src/js/products-api.js","../../src/js/refs.js","../../src/js/constants.js","../../src/js/render-function.js","../../src/js/storage.js","../../src/js/helpers.js"],"sourcesContent":["// Функції для роботи з бекендом\nimport axios from 'axios';\n\naxios.defaults.baseURL = \"https://dummyjson.com\";\n\n\nexport async function fetchCategories() {\n    const { data } = await axios.get(\"/products/category-list\");\n    return [\"All\", ...data];\n}\n\nexport async function fetchProducts(page = 1, limit = 12) {\n    const skip = (page - 1) * limit;\n    const { data } = await axios.get(`/products?limit=${limit}&skip=${skip}`);\n    return data.products;\n}\n\nexport async function fetchProductsByCategory(category, page = 1, limit = 12) {\n    if (category === \"All\") {\n        return fetchProducts(page, limit)\n    } else {\n        const skip = (page - 1) * limit;\n        const { data } = await axios.get(`/products/category/${category}/?limit=${limit}&skip=${skip}`);\n        return data.products;\n    }\n}\n\nexport async function fetchProductsById(id) {\n    const { data } = await axios.get(`/products/${id}`);\n    return data;\n}\n\nexport async function searchProducts(query, page = 1, limit = 12) {\n    if (!query.trim()) return []; \n    const skip = (page - 1) * limit;\n    const { data } = await axios.get(`/products/search?q=${query}&limit=${limit}&skip=${skip}`);\n    return data.products;\n}\n\n\n\n\n","//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n    categoriesList: document.querySelector(\"ul.categories\"),\n    productsList: document.querySelector(\"ul.products\"),\n    modal: document.querySelector('.modal'),\n};\n","//Константи\n\nexport const STORAGE_KEYS = {};\nexport const WISHLIST_KEY = 'wishlist';\nexport const CART_KEY = 'cart';\nexport const THEME_KEY = 'theme';\n\n\nexport const categoriesList = document.querySelector('ul.categories');\nexport const categoryButtons = () => categoriesList.querySelectorAll(\"button.categories__btn\");\nexport const productsList = document.querySelector('ul.products');\nexport const loadButton = document.querySelector(\".load-more\")\nexport const notFoundDiv = document.querySelector('div.not-found');\nexport const modal = document.querySelector('.modal');\nexport const modalProduct = document.querySelector('.modal-product');\nexport const searchForm = document.querySelector(\".search-form\");\nexport const searchInput = document.querySelector(\".search-form__input\");\nexport const clearSearchBtn = document.querySelector(\".search-form__btn-clear\");\nexport const wishButton = document.querySelector(\".modal-product__btn--wishlist\");\nexport const navCount = document.querySelector(\"[data-wishlist-count]\");\nexport const cartButton = document.querySelector(\".modal-product__btn--cart\");\nexport const navCountCart = document.querySelector(\"[data-cart-count]\");\nexport const cartCount = document.querySelector(\"[data-count]\");\nexport const cartPrice = document.querySelector(\"[data-price]\");\nexport const cartSummaryButton = document.querySelector(\".cart-summary__btn\");\nexport const loader = document.querySelector('.loader');\nexport const themeToggle = document.querySelector(\".theme-toggle\");\nexport const minusButton = document.querySelector(\".minus-button\");\nexport const plusButton = document.querySelector(\".plus-button\");\nexport const quantityInput = document.querySelector(\".quantity-input\");","//Функцію для створення, рендеру або видалення розмітки\n\nimport { refs } from \"./refs\";\nimport { modalProduct } from \"./constants\";\n\nexport function renderCategories(categories) {\n    const markupCategories = categories.map(category =>\n        `<li class=\"categories__item\">\n            <button class=\"categories__btn\" type=\"button\">${category}</button>\n        </li>`\n    ).join(\"\");\n\n    refs.categoriesList.innerHTML = markupCategories;\n}\n\nexport function renderProducts(products) {\n    const markupProducts = products.map(product =>\n        `<li class=\"products__item\" data-id=\"${product.id}\">\n        <img class=\"products__image\" src=\"${product.thumbnail}\" alt=\"${product.title}\"/>\n        <p class=\"products__title\">${product.title}</p>\n        <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:${product.brand}</span></p>\n        <p class=\"products__category\">Category:${product.category} </p>\n        <p class=\"products__price\">Price: $${product.price}</p>\n    </li>`\n    ).join(\"\");\n\n    refs.productsList.innerHTML = markupProducts;\n}\n\nexport function renderProductInModal(product) {\n    const { thumbnail, title, description, price, tags } = product;\n\n    modalProduct.innerHTML = `\n        <img class=\"modal-product__img\" src=\"${thumbnail}\" alt=\"${title}\" />\n        <div class=\"modal-product__content\">\n            <p class=\"modal-product__title\">${title}</p>\n            <ul class=\"modal-product__tags\">\n                ${tags.map(tag => `<li>${tag}</li>`).join('')}\n            </ul>\n            <p class=\"modal-product__description\">${description}</p>\n            <p class=\"modal-product__shipping-information\">Shipping: Free worldwide shipping</p>\n            <p class=\"modal-product__return-policy\">Return Policy: 30 days money back guarantee</p>\n            <p class=\"modal-product__price\">Price: $${price}</p>\n            <div class=\"product-quantity\">\n                <button class=\"minus-button quantity-button\">-</button>\n                <input type=\"number\" value=\"1\" min=\"1\" max=\"100\" class=\"quantity-input\" readonly>\n                <button class=\"plus-button quantity-button\">+</button>\n            </div>\n        </div>\n    `;\n}\n\n\nrefs.modal.addEventListener(\"click\", (event) => {\n    const isMinus = event.target.classList.contains(\"minus-button\");\n    const isPlus = event.target.classList.contains(\"plus-button\");\n\n    if (!isMinus && !isPlus) return;\n\n    const quantityInput = event.target.closest(\".product-quantity\").querySelector(\".quantity-input\");\n    let value = parseInt(quantityInput.value);\n\n    if (isMinus && value > 1) {\n        quantityInput.value = value - 1;\n    }\n\n    if (isPlus && value < 100) {\n        quantityInput.value = value + 1;\n    }\n});","//Робота з loacalStorage\nimport { WISHLIST_KEY, CART_KEY, THEME_KEY } from \"./constants\";\n\n// Wishlist\nexport const getWishlist = () => {\n    try {\n        const data = localStorage.getItem(WISHLIST_KEY);\n        return data ? JSON.parse(data) : [];\n    } catch (error) {\n        console.error(\"Wishlist data corrupted in localStorage:\", error);\n        return [];\n    }\n}\n\nexport const saveWishlist = (wishlist) => {\n    localStorage.setItem(WISHLIST_KEY, JSON.stringify(wishlist));\n}\n\nexport const addToWishlist = (productId) => {\n    const wishlist = getWishlist();\n    if (!wishlist.includes(productId)) {\n        wishlist.push(productId);\n        saveWishlist(wishlist);\n    }\n}\n\nexport const removeFromWishlist = (productId) => {\n  let wishlist = getWishlist();\n  wishlist = wishlist.filter(id => id !== productId);\n  saveWishlist(wishlist);\n};\n\nexport const isInWishlist = (productId) => {\n  const wishlist = getWishlist();\n  return wishlist.includes(productId);\n};\n\n// Cart\nexport const getCart = () => {\n    try {\n        const data = localStorage.getItem(CART_KEY);\n        return data ? JSON.parse(data) : [];\n    } catch (error) {\n        console.error(\"Cart data corrupted in localStorage:\", error);\n        return [];\n    }\n}\n\nexport const saveCart = (cart) => {\n    localStorage.setItem(CART_KEY, JSON.stringify(cart));\n}\n\nexport const addToCart = (productId) => {\n    const cart = getCart();\n    if (!cart.includes(productId)) {\n        cart.push(productId);\n        saveCart(cart);\n    }\n}\n\nexport const removeFromCart = (productId) => {\n  let cart = getCart();\n  cart = cart.filter(id => id !== productId);\n  saveCart(cart);\n};\n\nexport const isInCart = (productId) => {\n  const cart = getCart();\n  return cart.includes(productId);\n};\n\n// theme\n","//Допоміжні функції\n\nimport { fetchProducts, fetchProductsByCategory } from './products-api';\nimport { renderProducts } from './render-function';\nimport { productsList, loadButton, loader, themeToggle } from './constants';\nimport iziToast from 'izitoast';\n\n\nlet currentPage = 1;\nconst limit = 12;\nlet currentCategory = \"All\";\n\nexport const resetPagination = (newCategory = \"All\") => {\n    currentPage = 1;\n    currentCategory = newCategory;\n    productsList.innerHTML = '';\n};\n\nexport const loadMoreProducts = async () => {\n    loader.style.display = 'block';\n    try {\n        currentPage += 1;\n        let products;\n        if (currentCategory === \"All\") {\n            products = await fetchProducts(currentPage, limit);\n        } else {\n            products = await fetchProductsByCategory(currentCategory, currentPage, limit);\n        }\n\n        if (products.length === 0) {\n            loadButton.style.display = 'none';\n            iziToast.info({\n                title: 'Info',\n                message: 'No more products to load.',\n                position: 'topRight'\n            });\n        } else {\n            renderProducts(products);\n        }\n    } catch (error) {\n        console.error('Error loading more products:', error);\n    } finally {\n        loader.style.display = 'none';\n    }\n};\n\n// theme \nexport function changeTheme() {\nconst savedTheme = localStorage.getItem('theme') || 'light';\n\ndocument.body.classList.add(`${savedTheme}-theme`);\n\nthemeToggle.addEventListener('click', () => {\n    if (document.body.classList.contains('light-theme')) {\n        document.body.classList.replace('light-theme', 'dark-theme');\n        localStorage.setItem('theme', 'dark');\n    } else {\n        document.body.classList.replace('dark-theme', 'light-theme');\n        localStorage.setItem('theme', 'light');\n    }\n});\n}\n"],"names":["axios","fetchCategories","data","fetchProducts","page","limit","skip","fetchProductsByCategory","category","fetchProductsById","id","searchProducts","query","refs","WISHLIST_KEY","CART_KEY","categoriesList","categoryButtons","productsList","loadButton","notFoundDiv","modal","modalProduct","searchForm","searchInput","clearSearchBtn","wishButton","navCount","cartButton","navCountCart","cartCount","cartPrice","cartSummaryButton","loader","themeToggle","renderCategories","categories","markupCategories","renderProducts","products","markupProducts","product","renderProductInModal","thumbnail","title","description","price","tags","tag","event","isMinus","isPlus","quantityInput","value","getWishlist","error","saveWishlist","wishlist","addToWishlist","productId","removeFromWishlist","isInWishlist","getCart","saveCart","cart","addToCart","removeFromCart","isInCart","currentPage","currentCategory","resetPagination","newCategory","loadMoreProducts","iziToast","changeTheme","savedTheme"],"mappings":"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"}