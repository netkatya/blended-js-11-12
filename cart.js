import{p as l,f as m,r as y,m as a,d as u,c as h,e as x,g as P,K as w,k as r,h as I,j as T,n as k,l as M,L as c,M as i,o as d,q as b}from"./assets/helpers-CR-8xcWr.js";import{i as g}from"./assets/vendor-C-ssPgaG.js";const p=()=>{const t=T();k.textContent=t.length},B=()=>{const t=r();M.textContent=t.length},L=t=>{h(t)?u.textContent="Remove from Cart":u.textContent="Add to Cart"},C=async()=>{const t=r();if(t.length===0){c.textContent="0",i.textContent="$0.00";return}try{const o=t.map(n=>m(n)),e=await Promise.all(o);c.textContent=e.length;const s=e.reduce((n,v)=>n+(v.price||0),0);i.textContent=`$${s.toFixed(2)}`}catch(o){console.error("Помилка при підрахунку Total:",o),c.textContent="0",i.textContent="$0.00"}},f=async()=>{const t=r();if(t.length===0){d.classList.add("not-found--visible"),l.innerHTML="";return}try{const o=t.map(s=>m(s)),e=await Promise.all(o);d.classList.remove("not-found--visible"),b(e)}catch(o){console.error("Помилка при завантаженні cart:",o),d.classList.add("not-found--visible"),l.innerHTML=""}};l.addEventListener("click",async t=>{const o=t.target.closest("li.products__item");if(!o)return;const e=o.dataset.id;if(e)try{const s=await m(e);y(s),a.classList.add("modal--is-open"),L(e),u.onclick=()=>{h(e)?x(e):P(e),L(e),p(),f(),C()}}catch(s){console.error("Помилка при завантаженні продукту:",s)}});w.addEventListener("click",async()=>{if(r().length===0){g.warning({title:"Oops!",message:"Your cart is empty!",position:"topLeft"});return}g.success({title:"Success!",message:"Products purchased successfully!",position:"topLeft"}),localStorage.removeItem("cart"),await f(),p(),await C()});a.addEventListener("click",t=>{(t.target===a||t.target.classList.contains("modal__close-btn"))&&a.classList.remove("modal--is-open")});document.addEventListener("DOMContentLoaded",()=>{f(),p(),B(),C()});I();
//# sourceMappingURL=cart.js.map
