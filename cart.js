import{p as l,f as m,r as x,m as r,v as u,x as g,y as h,z as P,E as w,C as a,D as I,F as c,G as i,c as d,d as E}from"./assets/storage-CYTwZuui.js";import{i as L}from"./assets/vendor-CLZFq-H_.js";const p=()=>{const t=a();I.textContent=t.length},v=t=>{g(t)?u.textContent="Remove from Cart":u.textContent="Add to Cart"},C=async()=>{const t=a();if(t.length===0){c.textContent="0",i.textContent="$0.00";return}try{const o=t.map(n=>m(n)),e=await Promise.all(o);c.textContent=e.length;const s=e.reduce((n,y)=>n+(y.price||0),0);i.textContent=`$${s.toFixed(2)}`}catch(o){console.error("Помилка при підрахунку Total:",o),c.textContent="0",i.textContent="$0.00"}},f=async()=>{const t=a();if(t.length===0){d.classList.add("not-found--visible"),l.innerHTML="";return}try{const o=t.map(s=>m(s)),e=await Promise.all(o);d.classList.remove("not-found--visible"),E(e)}catch(o){console.error("Помилка при завантаженні cart:",o),d.classList.add("not-found--visible"),l.innerHTML=""}};l.addEventListener("click",async t=>{const o=t.target.closest("li.products__item");if(!o)return;const e=o.dataset.id;if(e)try{const s=await m(e);x(s),r.classList.add("modal--is-open"),v(e),u.onclick=()=>{g(e)?h(e):P(e),v(e),p(),f(),C()}}catch(s){console.error("Помилка при завантаженні продукту:",s)}});w.addEventListener("click",async()=>{if(a().length===0){L.warning({title:"Oops!",message:"Your cart is empty!",position:"topLeft"});return}L.success({title:"Success!",message:"Products purchased successfully!",position:"topLeft"}),localStorage.removeItem("cart"),await f(),p(),await C()});r.addEventListener("click",t=>{(t.target===r||t.target.classList.contains("modal__close-btn"))&&r.classList.remove("modal--is-open")});document.addEventListener("DOMContentLoaded",()=>{f(),p(),C()});
//# sourceMappingURL=cart.js.map
