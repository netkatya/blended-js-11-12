{"version":3,"file":"index.js","sources":["../src/home.js"],"sourcesContent":["//Логіка сторінки Home\n\nimport { fetchCategories, fetchProducts, fetchProductsByCategory, fetchProductsById, searchProducts } from \"./js/products-api\";\nimport { renderCategories, renderProducts, renderProductInModal } from \"./js/render-function\";\nimport { categoriesList, productsList, notFoundDiv, modal, modalProduct, searchForm, searchInput, categoryButtons, clearSearchBtn, wishButton } from \"./js/constants\";\n\n\nlet currentPage = 1;\nconst limit = 12;\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n    try {\n        const categories = await fetchCategories();\n        renderCategories(categories);\n\n        const products = await fetchProducts(currentPage, limit);\n        renderProducts(products);\n    } catch (error) {\n        console.error('Error loading data:', error);\n    }\n});\n\n    categoryButtons().forEach(btn => {\n        btn.classList.remove(\"categories__btn--active\");\n    });\n\ncategoriesList.addEventListener(\"click\", async (event) => {\n    const button = event.target.closest(\"button.categories__btn\");\n    if (!button) return;\n\n    const category = button.textContent.trim();\n\n    // тут актуальний виклик функції\n    categoryButtons().forEach(btn => {\n        btn.classList.remove(\"categories__btn--active\");\n    });\n\n    button.classList.add(\"categories__btn--active\");\n\n    searchInput.value = '';\n    clearSearchBtn.classList.add('hidden');\n    notFoundDiv.classList.remove('not-found--visible');\n\n    let products = [];\n\n    try {\n        if (category === \"All\") {\n            products = await fetchProducts(currentPage, limit);\n        } else {\n            products = await fetchProductsByCategory(category, currentPage, limit);\n        }\n\n        if (products.length === 0) {\n            notFoundDiv.classList.add('not-found--visible');\n            productsList.innerHTML = '';\n        } else {\n            notFoundDiv.classList.remove('not-found--visible');\n            renderProducts(products);\n        }\n    } catch (error) {\n        console.error('Помилка при завантаженні продуктів:', error);\n        notFoundDiv.classList.add('not-found--visible');\n        productsList.innerHTML = '';\n    }\n});\n\nproductsList.addEventListener(\"click\", async (event) => {\n    const productItem = event.target.closest(\"li.products__item\");\n    if (!productItem) return;\n\n    const productId = productItem.dataset.id;\n    if (!productId) return;\n\n    try {\n        const product = await fetchProductsById(productId);\n        renderProductInModal(product);\n        modal.classList.add(\"modal--is-open\"); \n    } catch (error) {\n        console.error('Помилка при завантаженні продукту:', error);\n    }\n});\n\nmodal.addEventListener(\"click\", (event) => {\n    if (event.target === modal || event.target.classList.contains(\"modal__close-btn\")) {\n        modal.classList.remove(\"modal--is-open\");\n    }\n});\n\nsearchForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    const query = searchInput.value.trim();\n\n    if (!query) return;\n\n    try {\n        const products = await searchProducts(query, currentPage, limit);\n\n        if (products.length === 0) {\n            notFoundDiv.classList.add('not-found--visible');\n            productsList.innerHTML = '';\n        } else {\n            notFoundDiv.classList.remove('not-found--visible');\n            renderProducts(products);\n        }\n    } catch (error) {\n        console.error('Помилка при завантаженні продуктів:', error);\n        notFoundDiv.classList.add('not-found--visible');\n        productsList.innerHTML = '';\n    }\n});\n\n\nsearchInput.addEventListener('input', () => {\n    if (searchInput.value.trim() !== '') {\n        clearSearchBtn.classList.remove('hidden');\n    } else {\n        clearSearchBtn.classList.add('hidden');\n    }\n});\n\n\nclearSearchBtn.addEventListener(\"click\", async () => {\n    searchInput.value = '';\n    clearSearchBtn.classList.add('hidden');\n    notFoundDiv.classList.remove('not-found--visible');\n\n    try {\n        const products = await fetchProducts(currentPage, limit);\n        renderProducts(products);\n    } catch (error) {\n        console.error('Помилка при завантаженні всіх продуктів:', error);\n        productsList.innerHTML = '';\n        notFoundDiv.classList.add('not-found--visible');\n    }\n});\n// wishlist\nwishButton.addEventListener(\"click\", async (event) => {\n    const productItem = event.target.closest(\"li.products__item\");\n    if (!productItem) return;\n\n    const productId = productItem.dataset.id;\n    if (!productId) return;\n})"],"names":["currentPage","limit","categories","fetchCategories","renderCategories","products","fetchProducts","renderProducts","error","categoryButtons","btn","categoriesList","event","button","category","searchInput","clearSearchBtn","notFoundDiv","fetchProductsByCategory","productsList","productItem","productId","product","fetchProductsById","renderProductInModal","modal","searchForm","query","searchProducts","wishButton"],"mappings":"4OAOA,IAAIA,EAAc,EAClB,MAAMC,EAAQ,GAEd,SAAS,iBAAiB,mBAAoB,SAAY,CACtD,GAAI,CACA,MAAMC,EAAa,MAAMC,IACzBC,EAAiBF,CAAU,EAE3B,MAAMG,EAAW,MAAMC,EAAcN,EAAaC,CAAK,EACvDM,EAAeF,CAAQ,CAC1B,OAAQG,EAAO,CACZ,QAAQ,MAAM,sBAAuBA,CAAK,CAC7C,CACL,CAAC,EAEGC,EAAiB,EAAC,QAAQC,GAAO,CAC7BA,EAAI,UAAU,OAAO,yBAAyB,CACtD,CAAK,EAELC,EAAe,iBAAiB,QAAS,MAAOC,GAAU,CACtD,MAAMC,EAASD,EAAM,OAAO,QAAQ,wBAAwB,EAC5D,GAAI,CAACC,EAAQ,OAEb,MAAMC,EAAWD,EAAO,YAAY,KAAI,EAGxCJ,EAAiB,EAAC,QAAQC,GAAO,CAC7BA,EAAI,UAAU,OAAO,yBAAyB,CACtD,CAAK,EAEDG,EAAO,UAAU,IAAI,yBAAyB,EAE9CE,EAAY,MAAQ,GACpBC,EAAe,UAAU,IAAI,QAAQ,EACrCC,EAAY,UAAU,OAAO,oBAAoB,EAEjD,IAAIZ,EAAW,CAAA,EAEf,GAAI,CACIS,IAAa,MACbT,EAAW,MAAMC,EAAcN,EAAaC,CAAK,EAEjDI,EAAW,MAAMa,EAAwBJ,EAAUd,EAAaC,CAAK,EAGrEI,EAAS,SAAW,GACpBY,EAAY,UAAU,IAAI,oBAAoB,EAC9CE,EAAa,UAAY,KAEzBF,EAAY,UAAU,OAAO,oBAAoB,EACjDV,EAAeF,CAAQ,EAE9B,OAAQG,EAAO,CACZ,QAAQ,MAAM,sCAAuCA,CAAK,EAC1DS,EAAY,UAAU,IAAI,oBAAoB,EAC9CE,EAAa,UAAY,EAC5B,CACL,CAAC,EAEDA,EAAa,iBAAiB,QAAS,MAAOP,GAAU,CACpD,MAAMQ,EAAcR,EAAM,OAAO,QAAQ,mBAAmB,EAC5D,GAAI,CAACQ,EAAa,OAElB,MAAMC,EAAYD,EAAY,QAAQ,GACtC,GAAKC,EAEL,GAAI,CACA,MAAMC,EAAU,MAAMC,EAAkBF,CAAS,EACjDG,EAAqBF,CAAO,EAC5BG,EAAM,UAAU,IAAI,gBAAgB,CACvC,OAAQjB,EAAO,CACZ,QAAQ,MAAM,qCAAsCA,CAAK,CAC5D,CACL,CAAC,EAEDiB,EAAM,iBAAiB,QAAUb,GAAU,EACnCA,EAAM,SAAWa,GAASb,EAAM,OAAO,UAAU,SAAS,kBAAkB,IAC5Ea,EAAM,UAAU,OAAO,gBAAgB,CAE/C,CAAC,EAEDC,EAAW,iBAAiB,SAAU,MAAOd,GAAU,CACnDA,EAAM,eAAc,EACpB,MAAMe,EAAQZ,EAAY,MAAM,KAAI,EAEpC,GAAKY,EAEL,GAAI,CACA,MAAMtB,EAAW,MAAMuB,EAAeD,EAAO3B,EAAaC,CAAK,EAE3DI,EAAS,SAAW,GACpBY,EAAY,UAAU,IAAI,oBAAoB,EAC9CE,EAAa,UAAY,KAEzBF,EAAY,UAAU,OAAO,oBAAoB,EACjDV,EAAeF,CAAQ,EAE9B,OAAQG,EAAO,CACZ,QAAQ,MAAM,sCAAuCA,CAAK,EAC1DS,EAAY,UAAU,IAAI,oBAAoB,EAC9CE,EAAa,UAAY,EAC5B,CACL,CAAC,EAGDJ,EAAY,iBAAiB,QAAS,IAAM,CACpCA,EAAY,MAAM,KAAI,IAAO,GAC7BC,EAAe,UAAU,OAAO,QAAQ,EAExCA,EAAe,UAAU,IAAI,QAAQ,CAE7C,CAAC,EAGDA,EAAe,iBAAiB,QAAS,SAAY,CACjDD,EAAY,MAAQ,GACpBC,EAAe,UAAU,IAAI,QAAQ,EACrCC,EAAY,UAAU,OAAO,oBAAoB,EAEjD,GAAI,CACA,MAAMZ,EAAW,MAAMC,EAAcN,EAAaC,CAAK,EACvDM,EAAeF,CAAQ,CAC1B,OAAQG,EAAO,CACZ,QAAQ,MAAM,2CAA4CA,CAAK,EAC/DW,EAAa,UAAY,GACzBF,EAAY,UAAU,IAAI,oBAAoB,CACjD,CACL,CAAC,EAEDY,EAAW,iBAAiB,QAAS,MAAOjB,GAAU,CAClD,MAAMQ,EAAcR,EAAM,OAAO,QAAQ,mBAAmB,EACxD,CAACQ,GAEaA,EAAY,QAAQ,EAE1C,CAAC"}