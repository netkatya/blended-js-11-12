{"version":3,"file":"index.js","sources":["../src/home.js"],"sourcesContent":["//Логіка сторінки Home\n\nimport { fetchCategories, fetchProducts, fetchProductsByCategory, fetchProductsById, searchProducts, fetchTotalProductsCount } from \"./js/products-api\";\nimport { renderCategories, renderProducts, renderProductInModal } from \"./js/render-function\";\nimport { categoriesList, productsList, notFoundDiv, modal, searchForm, searchInput, categoryButtons, clearSearchBtn, wishButton, navCount, cartButton, navCountCart, loader, loadButton, paginationContainer, } from \"./js/constants\";\nimport { addToWishlist, removeFromWishlist, isInWishlist, getWishlist, getCart, addToCart, removeFromCart, isInCart } from './js/storage';\nimport { resetPagination, initPagination, loadProductsByPage, changeTheme } from \"./js/helpers\";\n\nchangeTheme();\n\nlet currentPage = 1;\nconst limit = 12;\n\nconst updateNavCount = () => {\n  const wishlist = getWishlist();\n  navCount.textContent = wishlist.length;\n};\n\nconst updateNavCountCart = () => {\n  const cart = getCart();\n  const totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);\n  navCountCart.textContent = totalQuantity;\n};\n\nconst updateWishlistButton = (productId) => {\n  wishButton.textContent = isInWishlist(productId) ? 'Remove from Wishlist' : 'Add to Wishlist';\n};\n\nconst updateCartButton = (productId) => {\n  cartButton.textContent = isInCart(productId) ? 'Remove from Cart' : 'Add to Cart';\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n    loader.style.display = 'block';\n    try {\n        const categories = await fetchCategories();\n        renderCategories(categories);\n\n        const products = await fetchProducts(currentPage, limit);\n        renderProducts(products);\n\n        updateNavCount();\n        updateNavCountCart();\n    } catch (error) {\n        console.error('Error loading data:', error);\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\ncategoriesList.addEventListener(\"click\", async (event) => {\n    const button = event.target.closest(\"button.categories__btn\");\n    if (!button) return;\n\n    loader.style.display = 'block';\n\n    const category = button.textContent.trim();\n    resetPagination(category);\n\n    categoryButtons().forEach(btn => btn.classList.remove(\"categories__btn--active\"));\n    button.classList.add(\"categories__btn--active\");\n\n    searchInput.value = '';\n    clearSearchBtn.classList.add('hidden');\n    notFoundDiv.classList.remove('not-found--visible');\n\n    try {\n        let products;\n        if (category === \"All\") {\n            products = await fetchProducts(1, limit);\n        } else {\n            products = await fetchProductsByCategory(category, 1, limit);\n        }\n\n        if (products.length === 0) {\n            notFoundDiv.classList.add('not-found--visible');\n            productsList.innerHTML = '';\n            paginationContainer.style.display = 'none';\n        } else {\n            notFoundDiv.classList.remove('not-found--visible');\n            renderProducts(products);\n            // paginationContainer.style.display = 'flex';\n            if (productCartQuantity) {\n                productCartQuantity.style.display = \"none\";\n            }\n        }\n    } catch (error) {\n        console.error('Error loading category:', error);\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\nproductsList.addEventListener(\"click\", async (event) => {\n    const target = event.target;\n\n    const productItem = target.closest(\"li.products__item\");\n    if (!productItem) return;\n\n    const productId = productItem.dataset.id;\n    if (!productId) return;\n\n    loader.style.display = 'block';\n\n    try {\n        const product = await fetchProductsById(productId);\n        renderProductInModal(product);\n        modal.classList.add(\"modal--is-open\");\n\n        updateWishlistButton(productId);\n        updateCartButton(productId);\n\n        wishButton.onclick = () => {\n            isInWishlist(productId) ? removeFromWishlist(productId) : addToWishlist(productId);\n            updateWishlistButton(productId);\n            updateNavCount();\n        };\n\n        cartButton.onclick = () => {\n            isInCart(productId) ? removeFromCart(productId) : addToCart(productId);\n            updateCartButton(productId);\n            updateNavCountCart();\n        };\n\n    } catch (error) {\n        console.error('Error loading product:', error);\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\nmodal.addEventListener(\"click\", (event) => {\n    if (event.target === modal || event.target.classList.contains(\"modal__close-btn\")) {\n        modal.classList.remove(\"modal--is-open\");\n    }\n});\n\nsearchForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    const query = searchInput.value.trim();\n    if (!query) return;\n\n    loader.style.display = 'block';\n\n    try {\n        const products = await searchProducts(query, currentPage, limit);\n        if (products.length === 0) {\n            notFoundDiv.classList.add('not-found--visible');\n            productsList.innerHTML = '';\n            loadButton.style.display = 'none';\n        } else {\n            notFoundDiv.classList.remove('not-found--visible');\n            renderProducts(products);\n            \n\n        }\n    } catch (error) {\n        console.error('Error searching products:', error);\n        notFoundDiv.classList.add('not-found--visible');\n        productsList.innerHTML = '';\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\nsearchInput.addEventListener('input', () => {\n    clearSearchBtn.classList.toggle('hidden', searchInput.value.trim() === '');\n});\n\nclearSearchBtn.addEventListener(\"click\", async () => {\n    searchInput.value = '';\n    clearSearchBtn.classList.add('hidden');\n    notFoundDiv.classList.remove('not-found--visible');\n\n    loader.style.display = 'block';\n\n    try {\n        const products = await fetchProducts(1, limit);\n        renderProducts(products);\n        loadButton.style.display = 'block';\n    } catch (error) {\n        console.error('Error loading all products:', error);\n        productsList.innerHTML = '';\n        notFoundDiv.classList.add('not-found--visible');\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\n// Load More button\n// loadButton.addEventListener('click', loadMoreProducts);\n\n\n\n\nconst scrollUpButton = document.querySelector('.scroll-up');\n\nwindow.addEventListener('scroll', () => {\n    if (window.scrollY > 300) {\n        scrollUpButton.classList.remove('hidden');\n    } else {\n        scrollUpButton.classList.add('hidden');\n    }\n});\n\nscrollUpButton.addEventListener('click', () => {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n});\n\n\n\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n    resetPagination();\n    changeTheme();\n\n    // Get total items count for pagination\n    const totalItems = await fetchTotalProductsCount(); // implement this based on your API\n    initPagination(totalItems);\n\n    // Load first page\n    loadProductsByPage(1);\n});\n\n\nchangeTheme();"],"names":["changeTheme","currentPage","limit","updateNavCount","wishlist","getWishlist","navCount","updateNavCountCart","totalQuantity","getCart","sum","item","navCountCart","updateWishlistButton","productId","wishButton","isInWishlist","updateCartButton","cartButton","isInCart","loader","categories","fetchCategories","renderCategories","products","fetchProducts","renderProducts","error","categoriesList","event","button","category","resetPagination","categoryButtons","btn","searchInput","clearSearchBtn","notFoundDiv","fetchProductsByCategory","productsList","paginationContainer","productItem","product","fetchProductsById","renderProductInModal","modal","removeFromWishlist","addToWishlist","removeFromCart","addToCart","searchForm","query","searchProducts","loadButton","scrollUpButton","totalItems","fetchTotalProductsCount","initPagination","loadProductsByPage"],"mappings":"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"}