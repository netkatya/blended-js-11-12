{"version":3,"file":"index.js","sources":["../src/home.js"],"sourcesContent":["//Логіка сторінки Home\n\nimport { fetchCategories, fetchProducts, fetchProductsByCategory, fetchProductsById, searchProducts } from \"./js/products-api\";\nimport { renderCategories, renderProducts, renderProductInModal } from \"./js/render-function\";\nimport { categoriesList, productsList, notFoundDiv, modal, searchForm, searchInput, categoryButtons, clearSearchBtn, wishButton, navCount } from \"./js/constants\";\nimport { addToWishlist, removeFromWishlist, isInWishlist, getWishlist } from './js/storage';\n\nlet currentPage = 1;\nconst limit = 12;\n\n// Оновлення кількості в навігації\nconst updateNavCount = () => {\n  const wishlist = getWishlist();\n  navCount.textContent = wishlist.length;\n};\n\n// Функція для оновлення кнопки в модалці:\nconst updateWishlistButton = (productId) => {\n  if (isInWishlist(productId)) {\n    wishButton.textContent = 'Remove from Wishlist';\n  } else {\n    wishButton.textContent = 'Add to Wishlist';\n  }\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n    try {\n        const categories = await fetchCategories();\n        renderCategories(categories);\n\n        const products = await fetchProducts(currentPage, limit);\n        renderProducts(products);\n\n        updateNavCount(); // Показати кількість в wishlist при завантаженні\n    } catch (error) {\n        console.error('Error loading data:', error);\n    }\n});\n\ncategoryButtons().forEach(btn => {\n    btn.classList.remove(\"categories__btn--active\");\n});\n\ncategoriesList.addEventListener(\"click\", async (event) => {\n    const button = event.target.closest(\"button.categories__btn\");\n    if (!button) return;\n\n    const category = button.textContent.trim();\n\n    categoryButtons().forEach(btn => btn.classList.remove(\"categories__btn--active\"));\n    button.classList.add(\"categories__btn--active\");\n\n    searchInput.value = '';\n    clearSearchBtn.classList.add('hidden');\n    notFoundDiv.classList.remove('not-found--visible');\n\n    try {\n        const products = category === \"All\"\n            ? await fetchProducts(currentPage, limit)\n            : await fetchProductsByCategory(category, currentPage, limit);\n\n        if (products.length === 0) {\n            notFoundDiv.classList.add('not-found--visible');\n            productsList.innerHTML = '';\n        } else {\n            notFoundDiv.classList.remove('not-found--visible');\n            renderProducts(products);\n        }\n    } catch (error) {\n        console.error('Помилка при завантаженні продуктів:', error);\n        notFoundDiv.classList.add('not-found--visible');\n        productsList.innerHTML = '';\n    }\n});\n\nproductsList.addEventListener(\"click\", async (event) => {\n    const productItem = event.target.closest(\"li.products__item\");\n    if (!productItem) return;\n\n    const productId = productItem.dataset.id;\n    if (!productId) return;\n\n    try {\n        const product = await fetchProductsById(productId);\n        renderProductInModal(product);\n        modal.classList.add(\"modal--is-open\");\n\n        updateWishlistButton(productId);\n\n        // Додаємо логіку кліку на wishlist кнопку у модалці:\n        wishButton.onclick = () => {\n            if (isInWishlist(productId)) {\n                removeFromWishlist(productId);\n            } else {\n                addToWishlist(productId);\n            }\n            updateWishlistButton(productId);\n            updateNavCount();\n        };\n\n    } catch (error) {\n        console.error('Помилка при завантаженні продукту:', error);\n    }\n});\n\nmodal.addEventListener(\"click\", (event) => {\n    if (event.target === modal || event.target.classList.contains(\"modal__close-btn\")) {\n        modal.classList.remove(\"modal--is-open\");\n    }\n});\n\nsearchForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    const query = searchInput.value.trim();\n    if (!query) return;\n\n    try {\n        const products = await searchProducts(query, currentPage, limit);\n        if (products.length === 0) {\n            notFoundDiv.classList.add('not-found--visible');\n            productsList.innerHTML = '';\n        } else {\n            notFoundDiv.classList.remove('not-found--visible');\n            renderProducts(products);\n        }\n    } catch (error) {\n        console.error('Помилка при завантаженні продуктів:', error);\n        notFoundDiv.classList.add('not-found--visible');\n        productsList.innerHTML = '';\n    }\n});\n\nsearchInput.addEventListener('input', () => {\n    clearSearchBtn.classList.toggle('hidden', searchInput.value.trim() === '');\n});\n\nclearSearchBtn.addEventListener(\"click\", async () => {\n    searchInput.value = '';\n    clearSearchBtn.classList.add('hidden');\n    notFoundDiv.classList.remove('not-found--visible');\n\n    try {\n        const products = await fetchProducts(currentPage, limit);\n        renderProducts(products);\n    } catch (error) {\n        console.error('Помилка при завантаженні всіх продуктів:', error);\n        productsList.innerHTML = '';\n        notFoundDiv.classList.add('not-found--visible');\n    }\n});\n"],"names":["currentPage","limit","updateNavCount","wishlist","getWishlist","navCount","updateWishlistButton","productId","isInWishlist","wishButton","categories","fetchCategories","renderCategories","products","fetchProducts","renderProducts","error","categoryButtons","btn","categoriesList","event","button","category","searchInput","clearSearchBtn","notFoundDiv","fetchProductsByCategory","productsList","productItem","product","fetchProductsById","renderProductInModal","modal","removeFromWishlist","addToWishlist","searchForm","query","searchProducts"],"mappings":"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"}