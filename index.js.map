{"version":3,"file":"index.js","sources":["../src/js/helpers.js","../src/home.js"],"sourcesContent":["//Допоміжні функції\n\nimport { fetchProducts, fetchProductsByCategory } from './products-api';\nimport { renderProducts } from './render-function';\nimport { productsList, notFoundDiv, loadButton, loader } from './constants';\nimport iziToast from 'izitoast';\n\nlet currentPage = 1;\nconst limit = 12;\nlet currentCategory = \"All\";\n\nexport const resetPagination = (newCategory = \"All\") => {\n    currentPage = 1;\n    currentCategory = newCategory;\n    productsList.innerHTML = '';\n};\n\nexport const loadMoreProducts = async () => {\n    loader.style.display = 'block';\n    try {\n        currentPage += 1;\n        let products;\n        if (currentCategory === \"All\") {\n            products = await fetchProducts(currentPage, limit);\n        } else {\n            products = await fetchProductsByCategory(currentCategory, currentPage, limit);\n        }\n\n        if (products.length === 0) {\n            loadButton.style.display = 'none';\n            iziToast.info({\n                title: 'Info',\n                message: 'No more products to load.',\n                position: 'topRight'\n            });\n        } else {\n            renderProducts(products);\n        }\n    } catch (error) {\n        console.error('Error loading more products:', error);\n    } finally {\n        loader.style.display = 'none';\n    }\n};","//Логіка сторінки Home\n\nimport { fetchCategories, fetchProducts, fetchProductsByCategory, fetchProductsById, searchProducts } from \"./js/products-api\";\nimport { renderCategories, renderProducts, renderProductInModal } from \"./js/render-function\";\nimport { categoriesList, productsList, notFoundDiv, modal, searchForm, searchInput, categoryButtons, clearSearchBtn, wishButton, navCount, cartButton, navCountCart, loader, loadButton } from \"./js/constants\";\nimport { addToWishlist, removeFromWishlist, isInWishlist, getWishlist, getCart, addToCart, removeFromCart, isInCart } from './js/storage';\nimport { loadMoreProducts, resetPagination } from \"./js/helpers\";\n\nlet currentPage = 1;\nconst limit = 12;\n\nconst updateNavCount = () => {\n  const wishlist = getWishlist();\n  navCount.textContent = wishlist.length;\n};\n\nconst updateNavCountCart = () => {\n  const cart = getCart();\n  navCountCart.textContent = cart.length;\n};\n\nconst updateWishlistButton = (productId) => {\n  wishButton.textContent = isInWishlist(productId) ? 'Remove from Wishlist' : 'Add to Wishlist';\n};\n\nconst updateCartButton = (productId) => {\n  cartButton.textContent = isInCart(productId) ? 'Remove from Cart' : 'Add to Cart';\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n    loader.style.display = 'block';\n    try {\n        const categories = await fetchCategories();\n        renderCategories(categories);\n\n        const products = await fetchProducts(currentPage, limit);\n        renderProducts(products);\n\n        updateNavCount();\n        updateNavCountCart();\n    } catch (error) {\n        console.error('Error loading data:', error);\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\ncategoriesList.addEventListener(\"click\", async (event) => {\n    const button = event.target.closest(\"button.categories__btn\");\n    if (!button) return;\n\n    loader.style.display = 'block';\n\n    const category = button.textContent.trim();\n    resetPagination(category);\n\n    categoryButtons().forEach(btn => btn.classList.remove(\"categories__btn--active\"));\n    button.classList.add(\"categories__btn--active\");\n\n    searchInput.value = '';\n    clearSearchBtn.classList.add('hidden');\n    notFoundDiv.classList.remove('not-found--visible');\n\n    try {\n        let products;\n        if (category === \"All\") {\n            products = await fetchProducts(1, limit);\n        } else {\n            products = await fetchProductsByCategory(category, 1, limit);\n        }\n\n        if (products.length === 0) {\n            notFoundDiv.classList.add('not-found--visible');\n            productsList.innerHTML = '';\n            loadButton.style.display = 'none';\n        } else {\n            notFoundDiv.classList.remove('not-found--visible');\n            renderProducts(products);\n            loadButton.style.display = 'block';\n        }\n    } catch (error) {\n        console.error('Error loading category:', error);\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\nproductsList.addEventListener(\"click\", async (event) => {\n    const productItem = event.target.closest(\"li.products__item\");\n    if (!productItem) return;\n\n    const productId = productItem.dataset.id;\n    if (!productId) return;\n\n    loader.style.display = 'block';\n\n    try {\n        const product = await fetchProductsById(productId);\n        renderProductInModal(product);\n        modal.classList.add(\"modal--is-open\");\n\n        updateWishlistButton(productId);\n        updateCartButton(productId);\n\n        wishButton.onclick = () => {\n            isInWishlist(productId) ? removeFromWishlist(productId) : addToWishlist(productId);\n            updateWishlistButton(productId);\n            updateNavCount();\n        };\n\n        cartButton.onclick = () => {\n            isInCart(productId) ? removeFromCart(productId) : addToCart(productId);\n            updateCartButton(productId);\n            updateNavCountCart();\n        };\n\n    } catch (error) {\n        console.error('Error loading product:', error);\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\nmodal.addEventListener(\"click\", (event) => {\n    if (event.target === modal || event.target.classList.contains(\"modal__close-btn\")) {\n        modal.classList.remove(\"modal--is-open\");\n    }\n});\n\nsearchForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    const query = searchInput.value.trim();\n    if (!query) return;\n\n    loader.style.display = 'block';\n\n    try {\n        const products = await searchProducts(query, currentPage, limit);\n        if (products.length === 0) {\n            notFoundDiv.classList.add('not-found--visible');\n            productsList.innerHTML = '';\n        } else {\n            notFoundDiv.classList.remove('not-found--visible');\n            renderProducts(products);\n            loadButton.style.display = 'none';\n        }\n    } catch (error) {\n        console.error('Error searching products:', error);\n        notFoundDiv.classList.add('not-found--visible');\n        productsList.innerHTML = '';\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\nsearchInput.addEventListener('input', () => {\n    clearSearchBtn.classList.toggle('hidden', searchInput.value.trim() === '');\n});\n\nclearSearchBtn.addEventListener(\"click\", async () => {\n    searchInput.value = '';\n    clearSearchBtn.classList.add('hidden');\n    notFoundDiv.classList.remove('not-found--visible');\n\n    loader.style.display = 'block';\n\n    try {\n        const products = await fetchProducts(1, limit);\n        renderProducts(products);\n        loadButton.style.display = 'block';\n    } catch (error) {\n        console.error('Error loading all products:', error);\n        productsList.innerHTML = '';\n        notFoundDiv.classList.add('not-found--visible');\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\n// Load More button\nloadButton.addEventListener('click', loadMoreProducts);"],"names":["currentPage","limit","currentCategory","resetPagination","newCategory","productsList","loadMoreProducts","loader","products","fetchProducts","fetchProductsByCategory","loadButton","iziToast","renderProducts","error","updateNavCount","wishlist","getWishlist","navCount","updateNavCountCart","cart","getCart","navCountCart","updateWishlistButton","productId","wishButton","isInWishlist","updateCartButton","cartButton","isInCart","categories","fetchCategories","renderCategories","categoriesList","event","button","category","categoryButtons","btn","searchInput","clearSearchBtn","notFoundDiv","productItem","product","fetchProductsById","renderProductInModal","modal","removeFromWishlist","addToWishlist","removeFromCart","addToCart","searchForm","query","searchProducts"],"mappings":"uSAOA,IAAIA,EAAc,EAClB,MAAMC,EAAQ,GACd,IAAIC,EAAkB,MAEf,MAAMC,EAAkB,CAACC,EAAc,QAAU,CACpDJ,EAAc,EACdE,EAAkBE,EAClBC,EAAa,UAAY,EAC7B,EAEaC,EAAmB,SAAY,CACxCC,EAAO,MAAM,QAAU,QACvB,GAAI,CACAP,GAAe,EACf,IAAIQ,EACAN,IAAoB,MACpBM,EAAW,MAAMC,EAAcT,EAAaC,CAAK,EAEjDO,EAAW,MAAME,EAAwBR,EAAiBF,EAAaC,CAAK,EAG5EO,EAAS,SAAW,GACpBG,EAAW,MAAM,QAAU,OAC3BC,EAAS,KAAK,CACV,MAAO,OACP,QAAS,4BACT,SAAU,UAC1B,CAAa,GAEDC,EAAeL,CAAQ,CAE9B,OAAQM,EAAO,CACZ,QAAQ,MAAM,+BAAgCA,CAAK,CAC3D,QAAc,CACNP,EAAO,MAAM,QAAU,MAC1B,CACL,ECnCA,IAAIP,EAAc,EAClB,MAAMC,EAAQ,GAERc,EAAiB,IAAM,CAC3B,MAAMC,EAAWC,IACjBC,EAAS,YAAcF,EAAS,MAClC,EAEMG,EAAqB,IAAM,CAC/B,MAAMC,EAAOC,IACbC,EAAa,YAAcF,EAAK,MAClC,EAEMG,EAAwBC,GAAc,CAC1CC,EAAW,YAAcC,EAAaF,CAAS,EAAI,uBAAyB,iBAC9E,EAEMG,EAAoBH,GAAc,CACtCI,EAAW,YAAcC,EAASL,CAAS,EAAI,mBAAqB,aACtE,EAEA,SAAS,iBAAiB,mBAAoB,SAAY,CACtDjB,EAAO,MAAM,QAAU,QACvB,GAAI,CACA,MAAMuB,EAAa,MAAMC,IACzBC,EAAiBF,CAAU,EAE3B,MAAMtB,EAAW,MAAMC,EAAcT,EAAaC,CAAK,EACvDY,EAAeL,CAAQ,EAEvBO,IACAI,GACH,OAAQL,EAAO,CACZ,QAAQ,MAAM,sBAAuBA,CAAK,CAClD,QAAc,CACNP,EAAO,MAAM,QAAU,MAC1B,CACL,CAAC,EAED0B,EAAe,iBAAiB,QAAS,MAAOC,GAAU,CACtD,MAAMC,EAASD,EAAM,OAAO,QAAQ,wBAAwB,EAC5D,GAAI,CAACC,EAAQ,OAEb5B,EAAO,MAAM,QAAU,QAEvB,MAAM6B,EAAWD,EAAO,YAAY,KAAI,EACxChC,EAAgBiC,CAAQ,EAExBC,EAAiB,EAAC,QAAQC,GAAOA,EAAI,UAAU,OAAO,yBAAyB,CAAC,EAChFH,EAAO,UAAU,IAAI,yBAAyB,EAE9CI,EAAY,MAAQ,GACpBC,EAAe,UAAU,IAAI,QAAQ,EACrCC,EAAY,UAAU,OAAO,oBAAoB,EAEjD,GAAI,CACA,IAAIjC,EACA4B,IAAa,MACb5B,EAAW,MAAMC,EAAc,EAAGR,CAAK,EAEvCO,EAAW,MAAME,EAAwB0B,EAAU,EAAGnC,CAAK,EAG3DO,EAAS,SAAW,GACpBiC,EAAY,UAAU,IAAI,oBAAoB,EAC9CpC,EAAa,UAAY,GACzBM,EAAW,MAAM,QAAU,SAE3B8B,EAAY,UAAU,OAAO,oBAAoB,EACjD5B,EAAeL,CAAQ,EACvBG,EAAW,MAAM,QAAU,QAElC,OAAQG,EAAO,CACZ,QAAQ,MAAM,0BAA2BA,CAAK,CACtD,QAAc,CACNP,EAAO,MAAM,QAAU,MAC1B,CACL,CAAC,EAEDF,EAAa,iBAAiB,QAAS,MAAO6B,GAAU,CACpD,MAAMQ,EAAcR,EAAM,OAAO,QAAQ,mBAAmB,EAC5D,GAAI,CAACQ,EAAa,OAElB,MAAMlB,EAAYkB,EAAY,QAAQ,GACtC,GAAKlB,EAEL,CAAAjB,EAAO,MAAM,QAAU,QAEvB,GAAI,CACA,MAAMoC,EAAU,MAAMC,EAAkBpB,CAAS,EACjDqB,EAAqBF,CAAO,EAC5BG,EAAM,UAAU,IAAI,gBAAgB,EAEpCvB,EAAqBC,CAAS,EAC9BG,EAAiBH,CAAS,EAE1BC,EAAW,QAAU,IAAM,CACvBC,EAAaF,CAAS,EAAIuB,EAAmBvB,CAAS,EAAIwB,EAAcxB,CAAS,EACjFD,EAAqBC,CAAS,EAC9BT,GACZ,EAEQa,EAAW,QAAU,IAAM,CACvBC,EAASL,CAAS,EAAIyB,EAAezB,CAAS,EAAI0B,EAAU1B,CAAS,EACrEG,EAAiBH,CAAS,EAC1BL,GACZ,CAEK,OAAQL,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,CACrD,QAAc,CACNP,EAAO,MAAM,QAAU,MAC1B,EACL,CAAC,EAEDuC,EAAM,iBAAiB,QAAUZ,GAAU,EACnCA,EAAM,SAAWY,GAASZ,EAAM,OAAO,UAAU,SAAS,kBAAkB,IAC5EY,EAAM,UAAU,OAAO,gBAAgB,CAE/C,CAAC,EAEDK,EAAW,iBAAiB,SAAU,MAAOjB,GAAU,CACnDA,EAAM,eAAc,EACpB,MAAMkB,EAAQb,EAAY,MAAM,KAAI,EACpC,GAAKa,EAEL,CAAA7C,EAAO,MAAM,QAAU,QAEvB,GAAI,CACA,MAAMC,EAAW,MAAM6C,EAAeD,EAAOpD,EAAaC,CAAK,EAC3DO,EAAS,SAAW,GACpBiC,EAAY,UAAU,IAAI,oBAAoB,EAC9CpC,EAAa,UAAY,KAEzBoC,EAAY,UAAU,OAAO,oBAAoB,EACjD5B,EAAeL,CAAQ,EACvBG,EAAW,MAAM,QAAU,OAElC,OAAQG,EAAO,CACZ,QAAQ,MAAM,4BAA6BA,CAAK,EAChD2B,EAAY,UAAU,IAAI,oBAAoB,EAC9CpC,EAAa,UAAY,EACjC,QAAc,CACNE,EAAO,MAAM,QAAU,MAC1B,EACL,CAAC,EAEDgC,EAAY,iBAAiB,QAAS,IAAM,CACxCC,EAAe,UAAU,OAAO,SAAUD,EAAY,MAAM,SAAW,EAAE,CAC7E,CAAC,EAEDC,EAAe,iBAAiB,QAAS,SAAY,CACjDD,EAAY,MAAQ,GACpBC,EAAe,UAAU,IAAI,QAAQ,EACrCC,EAAY,UAAU,OAAO,oBAAoB,EAEjDlC,EAAO,MAAM,QAAU,QAEvB,GAAI,CACA,MAAMC,EAAW,MAAMC,EAAc,EAAGR,CAAK,EAC7CY,EAAeL,CAAQ,EACvBG,EAAW,MAAM,QAAU,OAC9B,OAAQG,EAAO,CACZ,QAAQ,MAAM,8BAA+BA,CAAK,EAClDT,EAAa,UAAY,GACzBoC,EAAY,UAAU,IAAI,oBAAoB,CACtD,QAAc,CACNlC,EAAO,MAAM,QAAU,MAC1B,CACL,CAAC,EAGDI,EAAW,iBAAiB,QAASL,CAAgB"}