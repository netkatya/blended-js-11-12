{"version":3,"file":"index.js","sources":["../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/home.js"],"sourcesContent":["// Функції для роботи з бекендом\nimport axios from 'axios';\n\naxios.defaults.baseURL = \"https://dummyjson.com\";\n\n\nexport async function fetchCategories() {\n    const { data } = await axios.get(\"/products/category-list\");\n    return [\"All\", ...data];\n}\n\nexport async function fetchProducts(page = 1, limit = 12) {\n    const skip = (page - 1) * limit;\n    const { data } = await axios.get(`/products?limit=${limit}&skip=${skip}`);\n    return data.products;\n}\n\nexport async function fetchProductsByCategory(category, page = 1, limit = 12) {\n    if (category === \"All\") {\n        return fetchProducts(page, limit)\n    } else {\n        const skip = (page - 1) * limit;\n        const { data } = await axios.get(`/products/category/${category}/?limit=${limit}&skip=${skip}`);\n        return data.products;\n    }\n}\n\nexport async function fetchProductsById(id) {\n    const { data } = await axios.get(`/products/${id}`);\n    return data;\n}\n\nexport async function searchProducts(query, page = 1, limit = 12) {\n    if (!query.trim()) return []; \n    const skip = (page - 1) * limit;\n    const { data } = await axios.get(`/products/search?q=${query}&limit=${limit}&skip=${skip}`);\n    return data.products;\n}\n\n\n\n\n","//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n    categoriesList: document.querySelector(\"ul.categories\"),\n    productsList: document.querySelector(\"ul.products\"),\n};\n","//Функцію для створення, рендеру або видалення розмітки\n\nimport { refs } from \"./refs\";\nimport { modalProduct } from \"./constants\";\n\nexport function renderCategories(categories) {\n    const markupCategories = categories.map(category =>\n        `<li class=\"categories__item\">\n            <button class=\"categories__btn\" type=\"button\">${category}</button>\n        </li>`\n    ).join(\"\");\n\n    refs.categoriesList.innerHTML = markupCategories;\n}\n\nexport function renderProducts(products) {\n    const markupProducts = products.map(product =>\n        `<li class=\"products__item\" data-id=\"${product.id}\">\n        <img class=\"products__image\" src=\"${product.thumbnail}\" alt=\"${product.title}\"/>\n        <p class=\"products__title\">${product.title}</p>\n        <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:${product.brand}</span></p>\n        <p class=\"products__category\">Category:${product.category} </p>\n        <p class=\"products__price\">Price: $${product.price}</p>\n    </li>`\n    ).join(\"\");\n\n    refs.productsList.innerHTML = markupProducts;\n}\n\nexport function renderProductInModal(product) {\n    const { thumbnail, title, description, price, tags, brand } = product;\n\n    modalProduct.innerHTML = `\n        <img class=\"modal-product__img\" src=\"${thumbnail}\" alt=\"${title}\" />\n        <div class=\"modal-product__content\">\n            <p class=\"modal-product__title\">${title}</p>\n            <ul class=\"modal-product__tags\">\n                ${tags.map(tag => `<li>${tag}</li>`).join('')}\n            </ul>\n            <p class=\"modal-product__description\">${description}</p>\n            <p class=\"modal-product__shipping-information\">Shipping: Free worldwide shipping</p>\n            <p class=\"modal-product__return-policy\">Return Policy: 30 days money back guarantee</p>\n            <p class=\"modal-product__price\">Price: $${price}</p>\n            <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n        </div>\n    `;\n}","//Логіка сторінки Home\n\nimport { fetchCategories, fetchProducts, fetchProductsByCategory, fetchProductsById, searchProducts } from \"./js/products-api\";\nimport { renderCategories, renderProducts, renderProductInModal } from \"./js/render-function\";\nimport { categoriesList, productsList, notFoundDiv, modal, modalProduct, searchForm, searchInput, categoryButtons, clearSearchBtn } from \"./js/constants\";\n\n\nlet currentPage = 1;\nconst limit = 12;\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n    try {\n        const categories = await fetchCategories();\n        renderCategories(categories);\n\n        const products = await fetchProducts(currentPage, limit);\n        renderProducts(products);\n    } catch (error) {\n        console.error('Error loading data:', error);\n    }\n});\n\n    categoryButtons().forEach(btn => {\n        btn.classList.remove(\"categories__btn--active\");\n    });\n\ncategoriesList.addEventListener(\"click\", async (event) => {\n    const button = event.target.closest(\"button.categories__btn\");\n    if (!button) return;\n\n    const category = button.textContent.trim();\n\n    // тут актуальний виклик функції\n    categoryButtons().forEach(btn => {\n        btn.classList.remove(\"categories__btn--active\");\n    });\n\n    button.classList.add(\"categories__btn--active\");\n\n    searchInput.value = '';\n    clearSearchBtn.classList.add('hidden');\n    notFoundDiv.classList.remove('not-found--visible');\n\n    let products = [];\n\n    try {\n        if (category === \"All\") {\n            products = await fetchProducts(currentPage, limit);\n        } else {\n            products = await fetchProductsByCategory(category, currentPage, limit);\n        }\n\n        if (products.length === 0) {\n            notFoundDiv.classList.add('not-found--visible');\n            productsList.innerHTML = '';\n        } else {\n            notFoundDiv.classList.remove('not-found--visible');\n            renderProducts(products);\n        }\n    } catch (error) {\n        console.error('Помилка при завантаженні продуктів:', error);\n        notFoundDiv.classList.add('not-found--visible');\n        productsList.innerHTML = '';\n    }\n});\n\nproductsList.addEventListener(\"click\", async (event) => {\n    const productItem = event.target.closest(\"li.products__item\");\n    if (!productItem) return;\n\n    const productId = productItem.dataset.id;\n    if (!productId) return;\n\n    try {\n        const product = await fetchProductsById(productId);\n        renderProductInModal(product);\n        modal.classList.add(\"modal--is-open\"); \n    } catch (error) {\n        console.error('Помилка при завантаженні продукту:', error);\n    }\n});\n\nmodal.addEventListener(\"click\", (event) => {\n    if (event.target === modal || event.target.classList.contains(\"modal__close-btn\")) {\n        modal.classList.remove(\"modal--is-open\");\n    }\n});\n\nsearchForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    const query = searchInput.value.trim();\n\n    if (!query) return;\n\n    try {\n        const products = await searchProducts(query, currentPage, limit);\n\n        if (products.length === 0) {\n            notFoundDiv.classList.add('not-found--visible');\n            productsList.innerHTML = '';\n        } else {\n            notFoundDiv.classList.remove('not-found--visible');\n            renderProducts(products);\n        }\n    } catch (error) {\n        console.error('Помилка при завантаженні продуктів:', error);\n        notFoundDiv.classList.add('not-found--visible');\n        productsList.innerHTML = '';\n    }\n});\n\n\nsearchInput.addEventListener('input', () => {\n    if (searchInput.value.trim() !== '') {\n        clearSearchBtn.classList.remove('hidden');\n    } else {\n        clearSearchBtn.classList.add('hidden');\n    }\n});\n\n\nclearSearchBtn.addEventListener(\"click\", async () => {\n    searchInput.value = '';\n    clearSearchBtn.classList.add('hidden');\n    notFoundDiv.classList.remove('not-found--visible');\n\n    try {\n        const products = await fetchProducts(currentPage, limit);\n        renderProducts(products);\n    } catch (error) {\n        console.error('Помилка при завантаженні всіх продуктів:', error);\n        productsList.innerHTML = '';\n        notFoundDiv.classList.add('not-found--visible');\n    }\n});"],"names":["axios","fetchCategories","data","fetchProducts","page","limit","skip","fetchProductsByCategory","category","fetchProductsById","id","searchProducts","query","refs","renderCategories","categories","markupCategories","renderProducts","products","markupProducts","product","renderProductInModal","thumbnail","title","description","price","tags","brand","modalProduct","tag","currentPage","error","categoryButtons","btn","categoriesList","event","button","searchInput","clearSearchBtn","notFoundDiv","productsList","productItem","productId","modal","searchForm"],"mappings":"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"}